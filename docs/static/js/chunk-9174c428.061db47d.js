(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9174c428"],{"01f5":function(e,t,r){"use strict";t["a"]={hireType:[{id:1,value:"正式"},{id:2,value:"非正式"}],subjection:[{id:"1",value:"总部"},{id:"2",value:"分城市"}],workingState:[{id:"1",value:"在职"},{id:"2",value:"离职"}],leaveType:[{id:"1",value:"主动离职"},{id:"2",value:"被动离职"},{id:"3",value:"退休"}],attritionMonth:[{id:"1",value:"离职日本月"},{id:"2",value:"离职日次月"}],informaltype:[{id:"2",value:"实习"},{id:"3",value:"劳务"},{id:"4",value:"顾问"},{id:"5",value:"返聘"},{id:"6",value:"外包"}],highestDegree:[{id:"1",value:"初中"},{id:"2",value:"高中"},{id:"3",value:"中专"},{id:"4",value:"大专"},{id:"5",value:"本科"},{id:"6",value:"硕士"},{id:"7",value:"博士"},{id:"8",value:"其他"}],isOverseas:[{id:"1",value:"中国大陆"},{id:"2",value:"港澳台国外"}],gender:[{id:"1",value:"男"},{id:"2",value:"女"}],maritaStatus:[{id:"1",value:"未婚"},{id:"2",value:"已婚"},{id:"3",value:"离异"}],animalSymbol:[{id:"1",value:"鼠"},{id:"2",value:"牛"},{id:"3",value:"虎"},{id:"4",value:"兔"},{id:"5",value:"龙"},{id:"6",value:"蛇"},{id:"7",value:"马"},{id:"8",value:"羊"},{id:"9",value:"猴"},{id:"10",value:"鸡"},{id:"11",value:"狗"},{id:"12",value:"猪"}],constellation:[{code:1,value:"水瓶座"},{code:2,value:"双鱼座"},{code:3,value:"白羊座"},{code:4,value:"金牛座"},{code:5,value:"双子座"},{code:6,value:"巨蟹座"},{code:7,value:"狮子座"},{code:8,value:"处女座"},{code:9,value:"天秤座"},{code:10,value:"天蝎座"},{code:11,value:"射手座"},{code:12,value:"摩羯座"}],bloodType:[{id:"1",value:"A型"},{id:"2",value:"B型"},{id:"3",value:"O型"},{id:"4",value:"AB型"}],educationType:[{id:"1",value:"统招"},{id:"2",value:"自考"},{id:"3",value:"成考"}],positiveType:[{id:"1",value:"已转正"},{id:"2",value:"未转正"}],contractPeriod:[{id:"1",value:"6月"},{id:"2",value:"12月"},{id:"3",value:"24月"},{id:"4",value:"36月"},{id:"5",value:"其他"}],renewalCount:[{id:1,value:"0次"},{id:2,value:"1次"},{id:3,value:"2次"},{id:4,value:"3次"},{id:5,value:"4次或以上"}],resumeSource:[{id:"1",value:"智联招聘"},{id:"2",value:"拉勾网"},{id:"3",value:"前程无忧"},{id:"4",value:"猎聘网"},{id:"5",value:"校园宣讲"},{id:"6",value:"猎头"},{id:"7",value:"内部推荐"}],hireSourceType:[{id:"1",value:"社招"},{id:"2",value:"校招"}],departments:[{id:"1",value:"总裁办"},{id:"2",value:"研究院"}],stausInfos:[{id:"1",value:"在职"},{id:"2",value:"入职"},{id:"3",value:"离职"}],enableState:[{id:1,value:"已激活"},{id:2,value:"未激活"}]}},"0b62":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dashboard-container"},[a("div",{staticClass:"app-container"},[a("page-tools",{attrs:{"show-before":!1}},[a("template",{slot:"after"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.uploadExcel}},[e._v("导入")]),a("el-button",{attrs:{size:"small",type:"warning"},on:{click:e.exportExcel}},[e._v("导出")]),a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:e.addEmployeeInfo}},[e._v("新增员工")])],1)],2),a("el-card",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.employeeList,border:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),a("el-table-column",{attrs:{prop:"username",label:"姓名",sortable:""}}),a("el-table-column",{attrs:{label:"头像",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.row;return[a("img",{directives:[{name:"imagerror",rawName:"v-imagerror",value:r("bae5"),expression:"require('@/assets/common/bigUserHeader.png')"}],staticStyle:{"border-radius":"50%",width:"100px",height:"100px",padding:"10px"},attrs:{src:o.staffPhoto,alt:""},on:{click:function(t){return e.showQrCode(o.staffPhoto)}}})]}}])}),a("el-table-column",{attrs:{prop:"mobile",label:"手机号",sortable:""}}),a("el-table-column",{attrs:{prop:"workNumber",label:"工号",sortable:""}}),a("el-table-column",{attrs:{prop:"formOfEmployment",label:"聘用形式",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return["1"===t.row.formOfEmployment?a("el-tag",{attrs:{type:"success"}},[e._v("正式")]):e._e(),"1"!==t.row.formOfEmployment?a("el-tag",{attrs:{type:"warning"}},[e._v("非正式")]):e._e()]}}])}),a("el-table-column",{attrs:{prop:"departmentName",label:"部门",sortable:""}}),a("el-table-column",{attrs:{prop:"enableState",label:"账户状态",sortable:"",formatter:e.formateEnableState}}),a("el-table-column",{attrs:{prop:"date",label:"操作",width:"250",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small",disabled:!e.checkPermission("POINT-USER-UPDATE")},on:{click:function(r){return e.$router.push("/employees/detail/"+t.row.id)}}},[e._v("查看")]),a("el-button",{attrs:{type:"text",size:"small"}},[e._v("转正")]),a("el-button",{attrs:{type:"text",size:"small"}},[e._v("调岗")]),a("el-button",{attrs:{type:"text",size:"small"}},[e._v("离职")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(r){return e.assignRoles(t.row.id)}}},[e._v("角色")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(r){return e.delEmployee(t.row.id)}}},[e._v("删除")])]}}])})],1),a("el-row",{attrs:{type:"flex",justify:"end"}},[a("el-pagination",{attrs:{"current-page":e.employeeQuery.page,layout:"total, prev, pager, next",total:e.total},on:{"update:currentPage":function(t){return e.$set(e.employeeQuery,"page",t)},"update:current-page":function(t){return e.$set(e.employeeQuery,"page",t)},"current-change":e.handleCurrentChange}})],1)],1),a("addDialog",{attrs:{"add-dialog-visible":e.addDialogVisible},on:{"update:addDialogVisible":function(t){e.addDialogVisible=t},"update:add-dialog-visible":function(t){e.addDialogVisible=t},addEmployeeInfoSuccess:e.getEmployeeList}}),a("el-dialog",{attrs:{title:"二维码",visible:e.showCodeDialog},on:{"update:visible":function(t){e.showCodeDialog=t},opened:e.showQrCode,close:function(t){e.imgUrl=""}}},[a("el-row",{attrs:{type:"flex",justify:"center"}},[a("canvas",{ref:"myCanvas"})])],1),a("assign-roles",{ref:"assignRolesRef",attrs:{"show-role-dialog":e.showRoleDialog,"user-id":e.userId},on:{"update:showRoleDialog":function(t){e.showRoleDialog=t},"update:show-role-dialog":function(t){e.showRoleDialog=t}}})],1)])},o=[],l=r("1da1"),n=(r("7db0"),r("d3b7"),r("3ca3"),r("ddb0"),r("b64b"),r("d81d"),r("96cf"),r("8f00")),i=r("01f5"),s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{attrs:{title:"提示",visible:e.addDialogVisible,width:"50%","before-close":e.handleClose},on:{"update:visible":function(t){e.addDialogVisible=t}}},[r("el-form",{ref:"addEmployeeRef",attrs:{model:e.addEmployeeForm,rules:e.addEmployeeRules,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"姓名",prop:"username"}},[r("el-input",{model:{value:e.addEmployeeForm.username,callback:function(t){e.$set(e.addEmployeeForm,"username",t)},expression:"addEmployeeForm.username"}})],1),r("el-form-item",{attrs:{label:"手机号",prop:"mobile"}},[r("el-input",{model:{value:e.addEmployeeForm.mobile,callback:function(t){e.$set(e.addEmployeeForm,"mobile",t)},expression:"addEmployeeForm.mobile"}})],1),r("el-form-item",{attrs:{label:"入职时间",prop:"timeOfEntry"}},[r("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.addEmployeeForm.timeOfEntry,callback:function(t){e.$set(e.addEmployeeForm,"timeOfEntry",t)},expression:"addEmployeeForm.timeOfEntry"}})],1),r("el-form-item",{attrs:{label:"聘用形式",prop:"formOfEmployment"}},[r("el-input",{model:{value:e.addEmployeeForm.formOfEmployment,callback:function(t){e.$set(e.addEmployeeForm,"formOfEmployment",t)},expression:"addEmployeeForm.formOfEmployment"}})],1),r("el-form-item",{attrs:{label:"工号",prop:"workNumber"}},[r("el-input",{model:{value:e.addEmployeeForm.workNumber,callback:function(t){e.$set(e.addEmployeeForm,"workNumber",t)},expression:"addEmployeeForm.workNumber"}})],1),r("el-form-item",{attrs:{label:"部门",prop:"departmentName"}},[r("el-input",{model:{value:e.addEmployeeForm.departmentName,callback:function(t){e.$set(e.addEmployeeForm,"departmentName",t)},expression:"addEmployeeForm.departmentName"}})],1),r("el-form-item",{attrs:{label:"转正时间",prop:"correctionTime"}},[r("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.addEmployeeForm.correctionTime,callback:function(t){e.$set(e.addEmployeeForm,"correctionTime",t)},expression:"addEmployeeForm.correctionTime"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.handleClose}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.addEmployeeInfo}},[e._v("确 定")])],1)],1)},u=[],d={props:{addDialogVisible:{default:!1,type:Boolean}},data:function(){return{addEmployeeForm:{username:"",mobile:"",formOfEmployment:"",workNumber:"",departmentName:"",timeOfEntry:"",correctionTime:""},addEmployeeRules:{username:[{required:!0,message:"用户姓名不能为空",trigger:"blur"},{min:1,max:4,message:"用户姓名为1-4位"}],mobile:[{required:!0,message:"手机号不能为空",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"手机号格式不正确",trigger:"blur"}],formOfEmployment:[{required:!0,message:"聘用形式不能为空",trigger:"blur"}],workNumber:[{required:!0,message:"工号不能为空",trigger:"blur"}],departmentName:[{required:!0,message:"部门不能为空",trigger:"change"}],timeOfEntry:[{required:!0,message:"入职时间",trigger:"blur"}]}}},methods:{handleClose:function(){this.addEmployeeForm={username:"",mobile:"",formOfEmployment:"",workNumber:"",departmentName:"",timeOfEntry:"",correctionTime:""},this.$refs.addEmployeeRef.resetFields(),this.$emit("update:addDialogVisible",!1)},addEmployeeInfo:function(){var e=this;this.$refs.addEmployeeRef.validate(function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(r){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=7;break}return t.next=3,Object(n["b"])(e.addEmployeeForm);case 3:e.addEmployeeForm={username:"",mobile:"",formOfEmployment:"",workNumber:"",departmentName:"",timeOfEntry:"",correctionTime:""},e.$emit("update:addDialogVisible",!1),e.$message.success("新增员工成功"),e.$emit("addEmployeeInfoSuccess");case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}}},c=d,m=r("2877"),p=Object(m["a"])(c,s,u,!1,null,null,null),f=p.exports,b=r("d055"),v=r.n(b),y=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{attrs:{title:"分配角色",visible:e.showRoleDialog,"before-close":e.resetEdit}},[r("el-checkbox-group",{model:{value:e.roleIds,callback:function(t){e.roleIds=t},expression:"roleIds"}},e._l(e.list,(function(t){return r("el-checkbox",{key:t.id,attrs:{label:t.id}},[e._v(" "+e._s(t.name)+" ")])})),1),r("el-row",{attrs:{slot:"footer",type:"flex",justify:"center"},slot:"footer"},[r("el-col",{attrs:{span:6}},[r("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.addRoles}},[e._v("确定")]),r("el-button",{attrs:{size:"small"},on:{click:e.resetEdit}},[e._v("取消")])],1)],1)],1)},g=[],h=r("c24f"),w={props:{showRoleDialog:{type:Boolean,default:!1},userId:{type:String,default:null}},data:function(){return{roleIds:[],list:[]}},created:function(){this.getRoleList()},methods:{getRoleList:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(n["i"])();case 2:r=t.sent,a=r.rows,e.list=a;case 5:case"end":return t.stop()}}),t)})))()},getUserDetailById:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){var a,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(h["a"])(e);case 2:a=r.sent,o=a.roleIds,t.roleIds=o;case 5:case"end":return r.stop()}}),r)})))()},resetEdit:function(){this.$emit("update:showRoleDialog",!1),this.roleIds=[]},addRoles:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(n["c"])({id:e.userId,roleIds:e.roleIds});case 2:e.$message.success("为用户添加角色成功"),e.roleIds=[],e.$emit("update:showRoleDialog",!1);case 5:case"end":return t.stop()}}),t)})))()}}},E=w,x=Object(m["a"])(E,y,g,!1,null,null,null),k=x.exports,O={components:{addDialog:f,assignRoles:k},data:function(){return{employeeList:[],employeeQuery:{page:1,size:10},total:0,addDialogVisible:!1,showCodeDialog:!1,showRoleDialog:!1,userId:null}},created:function(){this.getEmployeeList()},methods:{getEmployeeList:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(n["e"])(e.employeeQuery);case 2:r=t.sent,a=r.rows,o=r.total,e.total=o,e.employeeList=a;case 7:case"end":return t.stop()}}),t)})))()},handleCurrentChange:function(e){this.employeeQuery.page=e,this.getEmployeeList()},formateEnableState:function(e,t,r,a){var o=i["a"].enableState.find((function(e){return e.id===r}));return o?o.value:"未知"},delEmployee:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((function(e){return e}));case 2:a=r.sent,"confirm"===a&&(Object(n["d"])(e),t.getEmployeeList());case 4:case"end":return r.stop()}}),r)})))()},addEmployeeInfo:function(){this.addDialogVisible=!0},uploadExcel:function(){this.$router.push("/import")},exportExcel:function(){var e=this,t={"手机号":"mobile","姓名":"username","入职日期":"timeOfEntry","聘用形式":"formOfEmployment","转正日期":"correctionTime","工号":"workNumber","部门":"departmentName"};Promise.all([r.e("chunk-519483dc"),r.e("chunk-09290bef")]).then(r.bind(null,"4bf8")).then(function(){var r=Object(l["a"])(regeneratorRuntime.mark((function r(a){var o,l,i,s,u;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(n["e"])({page:1,size:e.total});case 2:o=r.sent,l=o.rows,i=e.formateJson(t,l),s=[["姓名","主要信息","","","","","部门"]],u=["A1:A2","B1:F1","G1:G2"],a.export_json_to_excel({header:Object.keys(t),data:i,filename:"员工列表",autoWidth:!0,multiHeader:s,merges:u});case 8:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}())},formateJson:function(e,t){return t.map((function(t){return Object.keys(e).map((function(r){return t[e[r]]}))}))},showQrCode:function(e){var t=this;e&&(this.showCodeDialog=!0,this.$nextTick((function(){v.a.toCanvas(t.$refs.myCanvas,e)})))},assignRoles:function(e){this.userId=e,this.$refs.assignRolesRef.getUserDetailById(e),this.showRoleDialog=!0}}},R=O,j=Object(m["a"])(R,a,o,!1,null,null,null);t["default"]=j.exports},"8f00":function(e,t,r){"use strict";r.d(t,"e",(function(){return o})),r.d(t,"f",(function(){return l})),r.d(t,"d",(function(){return n})),r.d(t,"b",(function(){return i})),r.d(t,"j",(function(){return s})),r.d(t,"k",(function(){return u})),r.d(t,"h",(function(){return d})),r.d(t,"m",(function(){return c})),r.d(t,"g",(function(){return m})),r.d(t,"l",(function(){return p})),r.d(t,"i",(function(){return f})),r.d(t,"c",(function(){return b}));var a=r("b775");function o(e){return Object(a["a"])({url:"/sys/user",params:e})}function l(){return Object(a["a"])({url:"/sys/user/simple"})}function n(e){return Object(a["a"])({url:"/sys/user/".concat(e),method:"delete"})}function i(e){return Object(a["a"])({url:"/sys/user",method:"post",data:e})}function s(e){return Object(a["a"])({url:"/sys/user/batch",method:"post",data:e})}function u(e){return Object(a["a"])({url:"/sys/user/".concat(e.id),method:"put",data:e})}function d(e){return Object(a["a"])({url:"/employees/".concat(e,"/personalInfo")})}function c(e){return Object(a["a"])({url:"/employees/".concat(e.userId,"/personalInfo"),method:"put",data:e})}function m(e){return Object(a["a"])({url:"/employees/".concat(e,"/jobs")})}function p(e){return Object(a["a"])({url:"/employees/".concat(e.userId,"/jobs"),method:"put",data:e})}function f(){return Object(a["a"])({url:"/sys/role"})}function b(e){return Object(a["a"])({url:"/sys/user/assignRoles",method:"put",data:e})}},bae5:function(e,t,r){e.exports=r.p+"static/img/bigUserHeader.fda3837f.png"}}]);